<%- include("partials/header.ejs") %>

<!-- Begin page content -->
<main role="main" class="container">
    <h1>Add your Post here</h1>

    <form action="/add" method="POST">
        <div class="form-floating">
             <label for="title">Title</label>
             <input class="form-control" type="text" name="title" placeholder="Title" value="<%= (locals.title) ? title : ''  %>">
        </div>
        <div class="form-floating">
            <label for="floatingTextarea2">Message</label>
            <textarea class="form-control" name="message" placeholder="Message" style="height: 100px"><%= (locals.message) ? message : ''  %></textarea>
        </div>
        <div class="form-floating">
            <button type="submit" class="btn btn-primary">Add post</button>
        </div>
    </form>

    <hr>

    <% if (locals.posts) { %>
        <h1>Posts</h1>
        <% posts.forEach((post, i) => { %>
            <div class="card" style="width: 100%">
                <div class="card-body">
                    <h5 class="card-title"><%= post.title %></h5>
                    <p class="card-text"><%= post.message %></p>
                    <hr>
                    <a href="/edit?id=<%= i %>" class="card-link">edit post</a>
                    <a href="/delete?id=<%= i %>" class="card-link">delete post</a>
                </div>
            </div>
        <% }) %>
    <% } %>

</main>

<%- include("partials/footer.ejs") %>